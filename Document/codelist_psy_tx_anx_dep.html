<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Code lists for anxiety and depression psychological therapies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="codelist_psy_tx_anx_dep_files/libs/clipboard/clipboard.min.js"></script>
<script src="codelist_psy_tx_anx_dep_files/libs/quarto-html/quarto.js"></script>
<script src="codelist_psy_tx_anx_dep_files/libs/quarto-html/popper.min.js"></script>
<script src="codelist_psy_tx_anx_dep_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="codelist_psy_tx_anx_dep_files/libs/quarto-html/anchor.min.js"></script>
<link href="codelist_psy_tx_anx_dep_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="codelist_psy_tx_anx_dep_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="codelist_psy_tx_anx_dep_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="codelist_psy_tx_anx_dep_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="codelist_psy_tx_anx_dep_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Code lists for anxiety and depression psychological therapies</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>This document compiles the codelist of psychological therapies for Depression and Anxiety in the UK General practice. The codelist benefits from the NICE guideline recommendations on the management of anxiety and depression. Specific documents reviewed were:</p>
<ul>
<li><a href="https://www.nice.org.uk/guidance/ng222/chapter/Recommendations">Depression in adults: treatment and management</a></li>
<li><a href="https://www.nice.org.uk/guidance/cg113/chapter/Recommendations">Generalised anxiety disorder and panic disorder in adults: management</a></li>
</ul>
<p>Furthermore, the NHSD codelists for anxiety and depression available on OpenCodelist were adapted. These include:</p>
<ul>
<li><p>Depression support and treatment codes</p></li>
<li><p>Anxiety support and treatment codes</p></li>
</ul>
</section>
<section id="methodology" class="level3">
<h3 class="anchored" data-anchor-id="methodology">Methodology</h3>
<p>A two-step approach was taken for the development of this codelist:</p>
<p><strong>Step 1: Desk reviews of relevant guidelines and existing codelists for anxiety and depression</strong></p>
<p>This codelist benefits from the NICE guideline recommendations on the management of anxiety and depression. Specific documents reviewed were:</p>
<ol type="1">
<li><p><strong>Depression in adults: treatment and management</strong></p></li>
<li><p><strong>Generalised anxiety disorder and panic disorder in adults: management</strong></p></li>
</ol>
<p>The recommended therapies outlined in the guidelines and existing NHSD codelists for anxiety and depression, available on OpenCodelist, were used in developing a draft codelist. The adapted codelists were:</p>
<ol type="1">
<li><p>Depression support and treatment codes</p></li>
<li><p>Anxiety support and treatment codes</p></li>
</ol>
<p><strong>Step 2: A methodology-informed session with a General Practitioner</strong> A methodology-informed session was held with a General Practitioner to understand the approach to coding psychological therapies in eHR. This informed the development of improved search terms and inclusion/exclusion criteria.</p>
<p><strong>Inclusion and exclusion criteria</strong></p>
<p>This codelist is designed to maximize sensitivity by including all psychological therapy-related codes potentially applicable to anxiety and depression, regardless of explicit indication. Specifically,</p>
<ul>
<li><p>Psychological therapies codes specific to anxiety and depression were included</p></li>
<li><p>Psychological therapies codes for conditions related to anxiety and depression (e.g Insomnia, bipolar disorder, psychosis) were included</p></li>
<li><p>Generic psychological therapies codes (e.g.&nbsp;Cognitive Behavioural Therapy) not specific to other conditions were included</p></li>
<li><p>Common codes (based on GPâ€™s perspective) that indicated receipt of psychological therapies were included (e.g.&nbsp;seen by psychologists)</p></li>
<li><p>Psychological therapies codes specific to other conditions not related to anxiety and depression were excluded&nbsp;</p></li>
</ul>
<section id="search-terms" class="level4">
<h4 class="anchored" data-anchor-id="search-terms">Search Terms</h4>
<ul>
<li><p>Guided self-help</p></li>
<li><p>Digital cognitive behavioural therapy for depression</p></li>
<li><p>Cognitive Behavioural Therapy</p></li>
<li><p>Behavioural Activation</p></li>
<li><p>Group Exercise</p></li>
<li><p>Group mindfulness and meditation</p></li>
<li><p>Interpersonal psychotherapy</p></li>
<li><p>Counselling</p></li>
<li><p>Short-term psychodynamic psychotherapy</p></li>
<li><p>Individual problem solving</p></li>
<li><p>Behavioural couple therapy</p></li>
<li><p>Anxiety</p></li>
<li><p>Depression</p></li>
<li><p>Individual guided self-help</p></li>
<li><p>Individual non-facilitated self-help</p></li>
<li><p>Psycho-education</p></li>
<li><p>Education about anxiety</p></li>
<li><p>Counselling for anxiety</p></li>
<li><p>Referral to improving access to psychological therapies program</p></li>
<li><p>Talking therapies</p></li>
</ul>
</section>
</section>
<section id="results-code-lists-usage-patterns" class="level3">
<h3 class="anchored" data-anchor-id="results-code-lists-usage-patterns">Results: Code Lists Usage Patterns</h3>
<p>Load codelist: <a href="https://www.opencodelists.org/codelist/user/Kunle_Oreagba/psychological-therapies-coding-for-anxiety-and-depression/2d533ab8/" class="uri">https://www.opencodelists.org/codelist/user/Kunle_Oreagba/psychological-therapies-coding-for-anxiety-and-depression/2d533ab8/</a> from opencodelist</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load codelists from opencodelist</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>depr_anx_cod <span class="ot">&lt;-</span> <span class="fu">get_codelist</span>(<span class="st">"user/Kunle_Oreagba/psychological-therapies-coding-for-anxiety-and-depression/2d533ab8"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="a.-summary-of-depression-and-anxiety-psychological-therapies-code-usage" class="level5">
<h5 class="anchored" data-anchor-id="a.-summary-of-depression-and-anxiety-psychological-therapies-code-usage">A. Summary of depression and anxiety psychological therapies code usage</h5>
<div class="cell">
<div class="cell-output-display">
<div id="smjzgppuhm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#smjzgppuhm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#smjzgppuhm thead, #smjzgppuhm tbody, #smjzgppuhm tfoot, #smjzgppuhm tr, #smjzgppuhm td, #smjzgppuhm th {
  border-style: none;
}

#smjzgppuhm p {
  margin: 0;
  padding: 0;
}

#smjzgppuhm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#smjzgppuhm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#smjzgppuhm .gt_title {
  color: #333333;
  font-size: 16px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#smjzgppuhm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#smjzgppuhm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#smjzgppuhm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smjzgppuhm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#smjzgppuhm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#smjzgppuhm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#smjzgppuhm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#smjzgppuhm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#smjzgppuhm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#smjzgppuhm .gt_spanner_row {
  border-bottom-style: hidden;
}

#smjzgppuhm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#smjzgppuhm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#smjzgppuhm .gt_from_md > :first-child {
  margin-top: 0;
}

#smjzgppuhm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#smjzgppuhm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#smjzgppuhm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#smjzgppuhm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#smjzgppuhm .gt_row_group_first td {
  border-top-width: 2px;
}

#smjzgppuhm .gt_row_group_first th {
  border-top-width: 2px;
}

#smjzgppuhm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#smjzgppuhm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#smjzgppuhm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#smjzgppuhm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smjzgppuhm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#smjzgppuhm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#smjzgppuhm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#smjzgppuhm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#smjzgppuhm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#smjzgppuhm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#smjzgppuhm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#smjzgppuhm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#smjzgppuhm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#smjzgppuhm .gt_left {
  text-align: left;
}

#smjzgppuhm .gt_center {
  text-align: center;
}

#smjzgppuhm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#smjzgppuhm .gt_font_normal {
  font-weight: normal;
}

#smjzgppuhm .gt_font_bold {
  font-weight: bold;
}

#smjzgppuhm .gt_font_italic {
  font-style: italic;
}

#smjzgppuhm .gt_super {
  font-size: 65%;
}

#smjzgppuhm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#smjzgppuhm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#smjzgppuhm .gt_indent_1 {
  text-indent: 5px;
}

#smjzgppuhm .gt_indent_2 {
  text-indent: 10px;
}

#smjzgppuhm .gt_indent_3 {
  text-indent: 15px;
}

#smjzgppuhm .gt_indent_4 {
  text-indent: 20px;
}

#smjzgppuhm .gt_indent_5 {
  text-indent: 25px;
}

#smjzgppuhm .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#smjzgppuhm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border" style="text-align: left;"><strong>Overview of Depression and Anxiety Code Usage</strong></th>
</tr>
<tr class="gt_col_headings even">
<th id="snomed_code" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">snomed_code</th>
<th id="description" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">description</th>
<th id="usage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">usage</th>
<th id="percent_usage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" style="font-weight: bold" scope="col">percent_usage</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">380201000000109</td>
<td class="gt_row gt_left" headers="description">Referral to improving access to psychological therapies programme (procedure)</td>
<td class="gt_row gt_right" headers="usage">833130</td>
<td class="gt_row gt_right" headers="percent_usage">27.17%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1036481000000106</td>
<td class="gt_row gt_left" headers="description">Self-referral to Improving Access to Psychological Therapies programme (procedure)</td>
<td class="gt_row gt_right" headers="usage">749820</td>
<td class="gt_row gt_right" headers="percent_usage">24.46%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">310348003</td>
<td class="gt_row gt_left" headers="description">Seen by psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">645020</td>
<td class="gt_row gt_right" headers="percent_usage">21.04%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">395072006</td>
<td class="gt_row gt_left" headers="description">Counseling for postnatal depression (procedure)</td>
<td class="gt_row gt_right" headers="usage">146100</td>
<td class="gt_row gt_right" headers="percent_usage">4.77%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">863671000000106</td>
<td class="gt_row gt_left" headers="description">Accepted by psychological talking therapy service (finding)</td>
<td class="gt_row gt_right" headers="usage">125370</td>
<td class="gt_row gt_right" headers="percent_usage">4.09%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">519101000000109</td>
<td class="gt_row gt_left" headers="description">Referral for cognitive behavioural therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">82080</td>
<td class="gt_row gt_right" headers="percent_usage">2.68%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">702545008</td>
<td class="gt_row gt_left" headers="description">Psychoeducation (procedure)</td>
<td class="gt_row gt_right" headers="usage">71155</td>
<td class="gt_row gt_right" headers="percent_usage">2.32%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">228557008</td>
<td class="gt_row gt_left" headers="description">Cognitive and behavioral therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">56880</td>
<td class="gt_row gt_right" headers="percent_usage">1.86%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">766511000000107</td>
<td class="gt_row gt_left" headers="description">Psychological therapy started (situation)</td>
<td class="gt_row gt_right" headers="usage">43850</td>
<td class="gt_row gt_right" headers="percent_usage">1.43%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">933221000000107</td>
<td class="gt_row gt_left" headers="description">Mindfulness-based therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">35425</td>
<td class="gt_row gt_right" headers="percent_usage">1.16%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">199121000000106</td>
<td class="gt_row gt_left" headers="description">Referral for mental health self-help literature (procedure)</td>
<td class="gt_row gt_right" headers="usage">32300</td>
<td class="gt_row gt_right" headers="percent_usage">1.05%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">444175001</td>
<td class="gt_row gt_left" headers="description">Guided self-help cognitive behavioral therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">27980</td>
<td class="gt_row gt_right" headers="percent_usage">0.91%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">429329005</td>
<td class="gt_row gt_left" headers="description">Computerized cognitive behavioral therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">27270</td>
<td class="gt_row gt_right" headers="percent_usage">0.89%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">313087008</td>
<td class="gt_row gt_left" headers="description">Counseling for anxiety (procedure)</td>
<td class="gt_row gt_right" headers="usage">21780</td>
<td class="gt_row gt_right" headers="percent_usage">0.71%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">700216002</td>
<td class="gt_row gt_left" headers="description">Seen by child and adolescent psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">18525</td>
<td class="gt_row gt_right" headers="percent_usage">0.60%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">199111000000100</td>
<td class="gt_row gt_left" headers="description">Referral for guided self-help for depression (procedure)</td>
<td class="gt_row gt_right" headers="usage">15940</td>
<td class="gt_row gt_right" headers="percent_usage">0.52%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">276049006</td>
<td class="gt_row gt_left" headers="description">Self-help group support (finding)</td>
<td class="gt_row gt_right" headers="usage">15520</td>
<td class="gt_row gt_right" headers="percent_usage">0.51%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">247581008</td>
<td class="gt_row gt_left" headers="description">Problem solving (observable entity)</td>
<td class="gt_row gt_right" headers="usage">15125</td>
<td class="gt_row gt_right" headers="percent_usage">0.49%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">199101000000102</td>
<td class="gt_row gt_left" headers="description">Referral for guided self-help for anxiety (procedure)</td>
<td class="gt_row gt_right" headers="usage">14440</td>
<td class="gt_row gt_right" headers="percent_usage">0.47%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">860091000000107</td>
<td class="gt_row gt_left" headers="description">Seen by assistant psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">12040</td>
<td class="gt_row gt_right" headers="percent_usage">0.39%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1129491000000109</td>
<td class="gt_row gt_left" headers="description">Guided self-help psychological therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">7890</td>
<td class="gt_row gt_right" headers="percent_usage">0.26%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">302230009</td>
<td class="gt_row gt_left" headers="description">Generic cognitive behavioral therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">7730</td>
<td class="gt_row gt_right" headers="percent_usage">0.25%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1057351000000106</td>
<td class="gt_row gt_left" headers="description">Signposting to depression self-help group (procedure)</td>
<td class="gt_row gt_right" headers="usage">6705</td>
<td class="gt_row gt_right" headers="percent_usage">0.22%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">417158007</td>
<td class="gt_row gt_left" headers="description">Referral to psycho-educational group (procedure)</td>
<td class="gt_row gt_right" headers="usage">5360</td>
<td class="gt_row gt_right" headers="percent_usage">0.17%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">748041000000107</td>
<td class="gt_row gt_left" headers="description">Guided self-help using computer (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">4975</td>
<td class="gt_row gt_right" headers="percent_usage">0.16%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">861611000000100</td>
<td class="gt_row gt_left" headers="description">Education about anxiety (procedure)</td>
<td class="gt_row gt_right" headers="usage">4600</td>
<td class="gt_row gt_right" headers="percent_usage">0.15%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">873901000000102</td>
<td class="gt_row gt_left" headers="description">Seen by trainee psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">4210</td>
<td class="gt_row gt_right" headers="percent_usage">0.14%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">698631004</td>
<td class="gt_row gt_left" headers="description">Education about self-help group (procedure)</td>
<td class="gt_row gt_right" headers="usage">3570</td>
<td class="gt_row gt_right" headers="percent_usage">0.12%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">718026005</td>
<td class="gt_row gt_left" headers="description">Cognitive behavioral therapy for psychosis (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">3520</td>
<td class="gt_row gt_right" headers="percent_usage">0.11%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">443119008</td>
<td class="gt_row gt_left" headers="description">Behavioral activation therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">3200</td>
<td class="gt_row gt_right" headers="percent_usage">0.10%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">314034001</td>
<td class="gt_row gt_left" headers="description">Psychodynamic psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">3130</td>
<td class="gt_row gt_right" headers="percent_usage">0.10%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">376061000000109</td>
<td class="gt_row gt_left" headers="description">Prescription of self-help book (procedure)</td>
<td class="gt_row gt_right" headers="usage">2740</td>
<td class="gt_row gt_right" headers="percent_usage">0.09%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1109721000000108</td>
<td class="gt_row gt_left" headers="description">Digital cognitive behavioural therapy for insomnia (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">2210</td>
<td class="gt_row gt_right" headers="percent_usage">0.07%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">228553007</td>
<td class="gt_row gt_left" headers="description">Cognitive therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">2100</td>
<td class="gt_row gt_right" headers="percent_usage">0.07%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">443730003</td>
<td class="gt_row gt_left" headers="description">Interpersonal psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">1660</td>
<td class="gt_row gt_right" headers="percent_usage">0.05%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">859501000000107</td>
<td class="gt_row gt_left" headers="description">Group cognitive behavioural therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">1160</td>
<td class="gt_row gt_right" headers="percent_usage">0.04%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">401162000</td>
<td class="gt_row gt_left" headers="description">Problem solving therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">1060</td>
<td class="gt_row gt_right" headers="percent_usage">0.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">149631000000108</td>
<td class="gt_row gt_left" headers="description">Digital cognitive behavioural therapy for depression (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">1030</td>
<td class="gt_row gt_right" headers="percent_usage">0.03%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">864051000000106</td>
<td class="gt_row gt_left" headers="description">Seen by forensic psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">990</td>
<td class="gt_row gt_right" headers="percent_usage">0.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">748051000000105</td>
<td class="gt_row gt_left" headers="description">Guided self-help using book (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">910</td>
<td class="gt_row gt_right" headers="percent_usage">0.03%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1097161000000100</td>
<td class="gt_row gt_left" headers="description">Referral for cognitive behavioural therapy for psychosis (procedure)</td>
<td class="gt_row gt_right" headers="usage">905</td>
<td class="gt_row gt_right" headers="percent_usage">0.03%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">405779006</td>
<td class="gt_row gt_left" headers="description">Seen by clinical psychologist (finding)</td>
<td class="gt_row gt_right" headers="usage">740</td>
<td class="gt_row gt_right" headers="percent_usage">0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">814131000000101</td>
<td class="gt_row gt_left" headers="description">Referral for high intensity cognitive behavioural therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">580</td>
<td class="gt_row gt_right" headers="percent_usage">0.02%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1129491000000109</td>
<td class="gt_row gt_left" headers="description">Guided self-help (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">530</td>
<td class="gt_row gt_right" headers="percent_usage">0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1107191000000102</td>
<td class="gt_row gt_left" headers="description">Referral for digital cognitive behavioural therapy for insomnia (procedure)</td>
<td class="gt_row gt_right" headers="usage">485</td>
<td class="gt_row gt_right" headers="percent_usage">0.02%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">425680009</td>
<td class="gt_row gt_left" headers="description">Cognitive behavioral therapy by multidisciplinary team (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">480</td>
<td class="gt_row gt_right" headers="percent_usage">0.02%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1659251000000100</td>
<td class="gt_row gt_left" headers="description">Group mindfulness-based cognitive therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">320</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">264603002</td>
<td class="gt_row gt_left" headers="description">Transcranial magnetic stimulation of brain (procedure)</td>
<td class="gt_row gt_right" headers="usage">305</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">149521000000105</td>
<td class="gt_row gt_left" headers="description">Trauma focused cognitive behavioural therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">300</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">228552002</td>
<td class="gt_row gt_left" headers="description">Problem solving training (procedure)</td>
<td class="gt_row gt_right" headers="usage">290</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">286711000000107</td>
<td class="gt_row gt_left" headers="description">Counseling for depression (procedure)</td>
<td class="gt_row gt_right" headers="usage">270</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">429048003</td>
<td class="gt_row gt_left" headers="description">Short-term psychodynamic therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">250</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">313019002</td>
<td class="gt_row gt_left" headers="description">First treatment in a course of electroconvulsive therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">240</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">264603002</td>
<td class="gt_row gt_left" headers="description">Transcranial magnetic stimulation (procedure)</td>
<td class="gt_row gt_right" headers="usage">230</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">883841000000104</td>
<td class="gt_row gt_left" headers="description">Cognitive behavioural therapy parenting programme (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">195</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">313020008</td>
<td class="gt_row gt_left" headers="description">Subsequent treatment in a course of electroconvulsive therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">180</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1107181000000104</td>
<td class="gt_row gt_left" headers="description">Signposting for digital cognitive behavioural therapy for insomnia (procedure)</td>
<td class="gt_row gt_right" headers="usage">170</td>
<td class="gt_row gt_right" headers="percent_usage">0.01%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1423361000000109</td>
<td class="gt_row gt_left" headers="description">Mindfulness-based cognitive therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">150</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1833051000000102</td>
<td class="gt_row gt_left" headers="description">Mindfulness-based intervention (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">120</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">231079005</td>
<td class="gt_row gt_left" headers="description">Multiple electroconvulsive therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">105</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">284468008</td>
<td class="gt_row gt_left" headers="description">Bilateral electroconvulsive therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">100</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">923921000000104</td>
<td class="gt_row gt_left" headers="description">Referral for depression self-help video (procedure)</td>
<td class="gt_row gt_right" headers="usage">85</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">302242004</td>
<td class="gt_row gt_left" headers="description">Long-term psychodynamic psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">75</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1107201000000100</td>
<td class="gt_row gt_left" headers="description">Self referral for digital cognitive behavioural therapy for insomnia (procedure)</td>
<td class="gt_row gt_right" headers="usage">60</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">304821008</td>
<td class="gt_row gt_left" headers="description">Supportive expressive psychodynamic psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">60</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">302234000</td>
<td class="gt_row gt_left" headers="description">Beck's cognitive therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">45</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">231080008</td>
<td class="gt_row gt_left" headers="description">Multiple monitored electroconvulsive therapy (procedure)</td>
<td class="gt_row gt_right" headers="usage">40</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1129471000000105</td>
<td class="gt_row gt_left" headers="description">Couple therapy for depression (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">35</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">405792009</td>
<td class="gt_row gt_left" headers="description">Formal psychological therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">35</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">710201000000106</td>
<td class="gt_row gt_left" headers="description">Giving self-help leaflet (procedure)</td>
<td class="gt_row gt_right" headers="usage">30</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">765601000000101</td>
<td class="gt_row gt_left" headers="description">Problem solving (procedure)</td>
<td class="gt_row gt_right" headers="usage">30</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1129481000000107</td>
<td class="gt_row gt_left" headers="description">Behavioural couple therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">25</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">868185009</td>
<td class="gt_row gt_left" headers="description">Cognitive behavioral therapy for insomnia (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">20</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">1659271000000109</td>
<td class="gt_row gt_left" headers="description">Behavioural activation group therapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">15</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1127281000000100</td>
<td class="gt_row gt_left" headers="description">Applied relaxation (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">10</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">149591000000108</td>
<td class="gt_row gt_left" headers="description">Group cognitive and behavioural therapy for bipolar disorder (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">10</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1771581000000100</td>
<td class="gt_row gt_left" headers="description">Cognitive and behavioural therapy for bipolar disorder (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">10</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">304822001</td>
<td class="gt_row gt_left" headers="description">Psychodynamic-interpersonal psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">10</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">1106951000000105</td>
<td class="gt_row gt_left" headers="description">Interpersonal psychotherapy for group (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">5</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="snomed_code">286711000000107</td>
<td class="gt_row gt_left" headers="description">Counselling for depression (procedure)</td>
<td class="gt_row gt_right" headers="usage">5</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="snomed_code">304820009</td>
<td class="gt_row gt_left" headers="description">Developmental psychodynamic psychotherapy (regime/therapy)</td>
<td class="gt_row gt_right" headers="usage">5</td>
<td class="gt_row gt_right" headers="percent_usage">0.00%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="top-15-most-utilized-depression-and-anxiety-psychological-therapies-codes" class="level5">
<h5 class="anchored" data-anchor-id="top-15-most-utilized-depression-and-anxiety-psychological-therapies-codes">Top 15 most utilized depression and anxiety psychological therapies codes</h5>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="codelist_psy_tx_anx_dep_files/figure-html/Top%2015%20most%20utilized%20codes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>dep_anx_tx_cod_usage <span class="ot">&lt;-</span> snomed_usage <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(snomed_code <span class="sc">%in%</span> depr_anx_cod<span class="sc">$</span>code)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Extract IAPT code usage </span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>iapt_codes_usage <span class="ot">&lt;-</span> dep_anx_tx_cod_usage <span class="sc">|&gt;</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(<span class="fu">str_to_lower</span>(description), <span class="st">"access to psychological therapies programme"</span>))</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract semantic tag and add new variable</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>cod_usage_semantic_tag <span class="ot">&lt;-</span> iapt_codes_usage <span class="sc">|&gt;</span> </span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">description_short =</span> <span class="fu">str_remove</span>(description, <span class="st">" </span><span class="sc">\\</span><span class="st">([^()]+</span><span class="sc">\\</span><span class="st">)$"</span>),</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">semantic_tag =</span> <span class="fu">str_extract</span>(description, <span class="st">"</span><span class="sc">\\</span><span class="st">(([^()]+)</span><span class="sc">\\</span><span class="st">)$"</span>),</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">semantic_tag =</span> <span class="fu">str_replace_all</span>(semantic_tag, <span class="st">"[()]"</span>, <span class="st">""</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co">#Group by semantic tag</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>group_code_semantic <span class="ot">&lt;-</span> cod_usage_semantic_tag <span class="sc">|&gt;</span> </span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(snomed_code, description_short, semantic_tag) <span class="sc">|&gt;</span> </span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">usage =</span> <span class="fu">sum</span>(usage), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ratio_usage =</span> usage <span class="sc">/</span> <span class="fu">sum</span>(usage)) <span class="sc">|&gt;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>usage)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Create table grouped by semantic_tag</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>group_code_semantic <span class="sc">|&gt;</span> </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(semantic_tag) <span class="sc">|&gt;</span> </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_percent</span>(</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(ratio_usage),</span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">2</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_style</span>(</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">style =</span> <span class="fu">cell_text</span>(<span class="at">weight =</span> <span class="st">"bold"</span>),</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">locations =</span> <span class="fu">cells_body</span>(<span class="at">columns =</span> semantic_tag)</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">md</span>(<span class="st">"**Code Usage by Semantic Tag**"</span>)</span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="qvsbyqgnre" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#qvsbyqgnre table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#qvsbyqgnre thead, #qvsbyqgnre tbody, #qvsbyqgnre tfoot, #qvsbyqgnre tr, #qvsbyqgnre td, #qvsbyqgnre th {
  border-style: none;
}

#qvsbyqgnre p {
  margin: 0;
  padding: 0;
}

#qvsbyqgnre .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qvsbyqgnre .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#qvsbyqgnre .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qvsbyqgnre .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qvsbyqgnre .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvsbyqgnre .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvsbyqgnre .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qvsbyqgnre .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qvsbyqgnre .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qvsbyqgnre .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qvsbyqgnre .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qvsbyqgnre .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qvsbyqgnre .gt_spanner_row {
  border-bottom-style: hidden;
}

#qvsbyqgnre .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#qvsbyqgnre .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qvsbyqgnre .gt_from_md > :first-child {
  margin-top: 0;
}

#qvsbyqgnre .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qvsbyqgnre .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qvsbyqgnre .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#qvsbyqgnre .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#qvsbyqgnre .gt_row_group_first td {
  border-top-width: 2px;
}

#qvsbyqgnre .gt_row_group_first th {
  border-top-width: 2px;
}

#qvsbyqgnre .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvsbyqgnre .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#qvsbyqgnre .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#qvsbyqgnre .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvsbyqgnre .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvsbyqgnre .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qvsbyqgnre .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#qvsbyqgnre .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qvsbyqgnre .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qvsbyqgnre .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvsbyqgnre .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvsbyqgnre .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qvsbyqgnre .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#qvsbyqgnre .gt_left {
  text-align: left;
}

#qvsbyqgnre .gt_center {
  text-align: center;
}

#qvsbyqgnre .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qvsbyqgnre .gt_font_normal {
  font-weight: normal;
}

#qvsbyqgnre .gt_font_bold {
  font-weight: bold;
}

#qvsbyqgnre .gt_font_italic {
  font-style: italic;
}

#qvsbyqgnre .gt_super {
  font-size: 65%;
}

#qvsbyqgnre .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#qvsbyqgnre .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#qvsbyqgnre .gt_indent_1 {
  text-indent: 5px;
}

#qvsbyqgnre .gt_indent_2 {
  text-indent: 10px;
}

#qvsbyqgnre .gt_indent_3 {
  text-indent: 15px;
}

#qvsbyqgnre .gt_indent_4 {
  text-indent: 20px;
}

#qvsbyqgnre .gt_indent_5 {
  text-indent: 25px;
}

#qvsbyqgnre .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#qvsbyqgnre div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="gt_heading header">
<th colspan="4" class="gt_heading gt_title gt_font_normal gt_bottom_border"><strong>Code Usage by Semantic Tag</strong></th>
</tr>
<tr class="gt_col_headings even">
<th id="snomed_code" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">snomed_code</th>
<th id="description_short" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">description_short</th>
<th id="usage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">usage</th>
<th id="ratio_usage" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ratio_usage</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="gt_group_heading_row odd">
<td colspan="4" id="procedure" class="gt_group_heading" data-quarto-table-cell-role="th" scope="colgroup">procedure</td>
</tr>
<tr class="gt_row_group_first even">
<td class="gt_row gt_right" headers="procedure  snomed_code">380201000000109</td>
<td class="gt_row gt_left" headers="procedure  description_short">Referral to improving access to psychological therapies programme</td>
<td class="gt_row gt_right" headers="procedure  usage">833130</td>
<td class="gt_row gt_right" headers="procedure  ratio_usage">52.63%</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="procedure  snomed_code">1036481000000106</td>
<td class="gt_row gt_left" headers="procedure  description_short">Self-referral to Improving Access to Psychological Therapies programme</td>
<td class="gt_row gt_right" headers="procedure  usage">749820</td>
<td class="gt_row gt_right" headers="procedure  ratio_usage">47.37%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="plot-of-code-usage-by-semantic-tag" class="level4">
<h4 class="anchored" data-anchor-id="plot-of-code-usage-by-semantic-tag">Plot of code usage by semantic tag</h4>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="codelist_psy_tx_anx_dep_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>